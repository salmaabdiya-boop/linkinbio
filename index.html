<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkNode | Your Digital Home</title>
    <style>
        :root {
            --accent: #ff007a;
            --glass: rgba(255, 255, 255, 0.8);
            --grad: linear-gradient(135deg, #feb2b2 0%, #d6bcfa 50%, #81e6d9 100%);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

        body { 
            background: var(--grad);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            min-height: 100vh;
            color: #2d3748;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Views Control */
        .view { display: none; padding: 40px 20px; animation: fadeIn 0.5s ease forwards; }
        .view.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }

        /* Glass Cards */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 450px;
            margin: 0 auto;
        }

        /* Inputs & Buttons */
        input {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 15px;
            border: none;
            background: rgba(255,255,255,0.9);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
            font-size: 1rem;
        }

        .btn-glow {
            background: #000;
            color: white;
            padding: 15px;
            border-radius: 50px;
            width: 100%;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-glow:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        /* Profile Styles */
        .pfp-preview {
            width: 100px; height: 100px;
            border-radius: 50%;
            margin: 0 auto 20px;
            background: #eee;
            object-fit: cover;
            border: 5px solid white;
        }

        .link-pill {
            display: block;
            background: #000;
            color: white;
            padding: 18px;
            border-radius: 50px;
            margin-bottom: 15px;
            text-decoration: none;
            text-align: center;
            font-weight: 600;
            transition: 0.2s;
        }

        .link-pill:hover { background: #333; transform: scale(1.02); }

        .nav-header { text-align: center; margin-bottom: 30px; cursor: pointer; }
    </style>
</head>
<body>

    <section id="view-auth" class="view active">
        <div class="nav-header">
            <h1 style="font-size: 2.5rem; letter-spacing: -2px;">LinkNode</h1>
        </div>
        <div class="glass-card">
            <h2 style="margin-bottom: 20px; text-align: center;">Welcome, love</h2>
            <input type="email" id="auth-email" placeholder="Email address">
            <input type="password" id="auth-pass" placeholder="Create Password">
            <button class="btn-glow" onclick="handleAuth()">Create Account & Start</button>
            <p style="text-align: center; margin-top: 15px; font-size: 0.8rem; color: #666;">
                By joining, you're claiming your digital corner.
            </p>
        </div>
    </section>

    <section id="view-dash" class="view">
        <div class="glass-card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>Your Account</h3>
                <button onclick="logout()" style="background: none; border: none; cursor: pointer; font-weight: bold; color: var(--accent);">Logout</button>
            </div>

            <label style="font-weight: bold; font-size: 0.8rem;">PROFILE PHOTO URL</label>
            <input type="text" id="setup-pic" placeholder="Link to your photo" oninput="syncProfile()">
            
            <label style="font-weight: bold; font-size: 0.8rem;">DISPLAY NAME</label>
            <input type="text" id="setup-name" placeholder="Your Name" oninput="syncProfile()">

            <hr style="margin: 20px 0; border: none; border-top: 1px solid #ddd;">

            <label style="font-weight: bold; font-size: 0.8rem;">ADD A NEW LINK</label>
            <input type="text" id="link-title" placeholder="Platform Name (e.g. Instagram)">
            <input type="url" id="link-url" placeholder="https://...">
            <button class="btn-glow" style="background: var(--accent);" onclick="addLink()">Add Link +</button>

            <div id="dash-links-list" style="margin-top: 20px;"></div>
            
            <button class="btn-glow" style="margin-top: 20px; background: #fff; color: #000; border: 2px solid #000;" onclick="showView('view-profile')">View Public Profile ✨</button>
        </div>
    </section>

    <section id="view-profile" class="view">
        <div class="glass-card" style="text-align: center;">
            <img id="pub-pic" src="" class="pfp-preview">
            <h2 id="pub-name" style="margin-bottom: 30px;"></h2>
            
            <div id="pub-links-container"></div>
            
            <button onclick="showView('view-dash')" style="margin-top: 40px; background:none; border:none; color:#666; cursor:pointer; text-decoration: underline;">Back to Editing</button>
        </div>
    </section>

    <script>
        let currentUser = null;
        let db = JSON.parse(localStorage.getItem('ln_accounts')) || {};

        function showView(id) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'view-profile') renderPublic();
        }

        // --- ACCOUNT LOGIC ---
        function handleAuth() {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;

            if(!email || !pass) return alert("Please fill both, love.");

            if(!db[email]) {
                // Register new account
                db[email] = {
                    password: pass,
                    profile: { name: "New User", pic: "https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" },
                    links: []
                };
            } else if(db[email].password !== pass) {
                return alert("Wrong password!");
            }

            currentUser = email;
            saveDB();
            loadDashboard();
            showView('view-dash');
        }

        function logout() {
            currentUser = null;
            showView('view-auth');
        }

        // --- CONTENT LOGIC ---
        function syncProfile() {
            db[currentUser].profile.name = document.getElementById('setup-name').value;
            db[currentUser].profile.pic = document.getElementById('setup-pic').value;
            saveDB();
        }

        function addLink() {
            const title = document.getElementById('link-title').value;
            const url = document.getElementById('link-url').value;
            if(!title || !url) return;

            db[currentUser].links.push({ title, url, id: Date.now() });
            document.getElementById('link-title').value = '';
            document.getElementById('link-url').value = '';
            saveDB();
            renderDashLinks();
        }

        function deleteLink(id) {
            db[currentUser].links = db[currentUser].links.filter(l => l.id !== id);
            saveDB();
            renderDashLinks();
        }

        function saveDB() {
            localStorage.setItem('ln_accounts', JSON.stringify(db));
        }

        // --- RENDERING ---
        function loadDashboard() {
            const user = db[currentUser];
            document.getElementById('setup-name').value = user.profile.name;
            document.getElementById('setup-pic').value = user.profile.pic;
            renderDashLinks();
        }

        function renderDashLinks() {
            const list = document.getElementById('dash-links-list');
            list.innerHTML = db[currentUser].links.map(l => `
                <div style="background: white; padding: 10px; border-radius: 10px; margin-bottom: 8px; display: flex; justify-content: space-between;">
                    <span>${l.title}</span>
                    <button onclick="deleteLink(${l.id})" style="color:red; background:none; border:none; cursor:pointer;">✕</button>
                </div>
            `).join('');
        }

        function renderPublic() {
            const user = db[currentUser];
            document.getElementById('pub-name').innerText = user.profile.name;
            document.getElementById('pub-pic').src = user.profile.pic;
            
            const container = document.getElementById('pub-links-container');
            container.innerHTML = user.links.map(l => `
                <a href="${l.url}" target="_blank" class="link-pill">${l.title}</a>
            `).join('');
        }
    </script>
</body>
</html>
