<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkNode | Creator Suite</title>
    <style>
        :root {
            --primary: #6e45e2;
            --secondary: #88d3ce;
            --glass: rgba(255, 255, 255, 0.9);
            --text: #2d3436;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

        body { 
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text);
        }

        /* Views */
        .view { display: none; padding: 40px 20px; animation: fadeInUp 0.5s ease; }
        .view.active { display: block; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .container { max-width: 480px; margin: 0 auto; }

        /* Modern Glass UI */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border-radius: 32px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border: 1px solid rgba(255,255,255,0.4);
        }

        /* Inputs & Buttons */
        .input-box {
            width: 100%; padding: 14px; margin-bottom: 12px;
            border-radius: 14px; border: 1px solid #dfe6e9;
            background: white; font-size: 1rem; transition: 0.2s;
        }
        .input-box:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(110, 69, 226, 0.1); }

        .btn-action {
            background: #000; color: white; padding: 16px; border-radius: 50px;
            width: 100%; border: none; font-weight: 700; cursor: pointer;
            margin-top: 10px; transition: 0.3s;
        }
        .btn-action:hover { transform: scale(1.02); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        /* Profile & Links */
        .pfp-wrapper { text-align: center; margin-bottom: 20px; position: relative; }
        .pfp-img { width: 110px; height: 110px; border-radius: 50%; object-fit: cover; border: 4px solid white; background: #eee; }
        
        .link-pill {
            display: flex; align-items: center; background: white; 
            padding: 12px; border-radius: 20px; margin-bottom: 12px;
            text-decoration: none; color: inherit; transition: 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }
        .link-pill:hover { transform: scale(1.03); background: #fafafa; }
        .link-thumb { width: 45px; height: 45px; border-radius: 12px; object-fit: cover; margin-right: 15px; background: #eee; }
        .link-text { font-weight: 600; font-size: 1.05rem; }

        .dashboard-item { background: rgba(0,0,0,0.03); padding: 12px; border-radius: 15px; margin-bottom: 10px; display: flex; align-items: center; justify-content: space-between; }
    </style>
</head>
<body>

    <section id="auth" class="view active">
        <div class="container">
            <div class="glass-card">
                <h1 style="text-align:center; margin-bottom: 25px;">LinkNode</h1>
                <input type="email" id="email" class="input-box" placeholder="Email">
                <input type="password" id="pass" class="input-box" placeholder="Password">
                <button class="btn-action" onclick="auth()">Login / Sign Up</button>
            </div>
        </div>
    </section>

    <section id="dash" class="view">
        <div class="container">
            <div class="glass-card">
                <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                    <h3>My Account</h3>
                    <button onclick="logout()" style="border:none; background:none; color:red; cursor:pointer;">Logout</button>
                </div>

                <div class="pfp-wrapper">
                    <img id="dash-pfp" class="pfp-img" src="https://api.dicebear.com/7.x/shapes/svg?seed=1">
                    <input type="text" id="user-pfp-url" class="input-box" style="margin-top:10px;" placeholder="Paste Photo URL" oninput="updateUser()">
                    <input type="text" id="user-name" class="input-box" placeholder="Your Display Name" oninput="updateUser()">
                </div>

                <hr style="margin:20px 0; opacity:0.1;">

                <h4>Add Link</h4>
                <input type="text" id="l-title" class="input-box" placeholder="Title (e.g. My Shop)">
                <input type="url" id="l-url" class="input-box" placeholder="URL (https://...)">
                <input type="text" id="l-thumb" class="input-box" placeholder="Thumbnail Image URL (Optional)">
                <button class="btn-action" style="background:var(--primary);" onclick="addLink()">Add Link +</button>

                <div id="dash-links" style="margin-top:20px;"></div>
                <button class="btn-action" style="background:#fff; color:#000; border:1px solid #000;" onclick="show('profile')">Preview Public Profile</button>
            </div>
        </div>
    </section>

    <section id="profile" class="view">
        <div class="container" style="text-align:center;">
            <img id="pub-pfp" class="pfp-img" src="">
            <h2 id="pub-name" style="margin: 15px 0 30px 0; color: white; text-shadow: 0 2px 10px rgba(0,0,0,0.2);"></h2>
            
            <div id="pub-links"></div>
            
            <button onclick="show('dash')" style="margin-top:40px; color:white; background:none; border:none; cursor:pointer; opacity:0.7;">← Back to Editor</button>
        </div>
    </section>

    <script>
        let currentUser = null;
        let storage = JSON.parse(localStorage.getItem('linknode_v3')) || {};

        function show(id) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'profile') renderProfile();
        }

        function auth() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('pass').value;
            if(!email || !pass) return;

            if(!storage[email]) {
                storage[email] = { pass, name: "New Creator", pfp: "https://api.dicebear.com/7.x/micah/svg?seed=1", links: [] };
            } else if (storage[email].pass !== pass) {
                return alert("Wrong password");
            }

            currentUser = email;
            save();
            loadDash();
            show('dash');
        }

        function logout() { currentUser = null; show('auth'); }

        function updateUser() {
            storage[currentUser].name = document.getElementById('user-name').value;
            storage[currentUser].pfp = document.getElementById('user-pfp-url').value;
            document.getElementById('dash-pfp').src = storage[currentUser].pfp;
            save();
        }

        function addLink() {
            const title = document.getElementById('l-title').value;
            const url = document.getElementById('l-url').value;
            const thumb = document.getElementById('l-thumb').value || "https://api.dicebear.com/7.x/initials/svg?seed=" + title;
            
            if(!title || !url) return;
            storage[currentUser].links.push({ title, url, thumb, id: Date.now() });
            save();
            renderDashLinks();
            document.getElementById('l-title').value = '';
            document.getElementById('l-url').value = '';
            document.getElementById('l-thumb').value = '';
        }

        function deleteLink(id) {
            storage[currentUser].links = storage[currentUser].links.filter(l => l.id !== id);
            save();
            renderDashLinks();
        }

        function save() { localStorage.setItem('linknode_v3', JSON.stringify(storage)); }

        function loadDash() {
            const user = storage[currentUser];
            document.getElementById('user-name').value = user.name;
            document.getElementById('user-pfp-url').value = user.pfp;
            document.getElementById('dash-pfp').src = user.pfp;
            renderDashLinks();
        }

        function renderDashLinks() {
            const list = document.getElementById('dash-links');
            list.innerHTML = storage[currentUser].links.map(l => `
                <div class="dashboard-item">
                    <div style="display:flex; align-items:center;">
                        <img src="${l.thumb}" style="width:30px; height:30px; border-radius:5px; margin-right:10px; object-fit:cover;">
                        <span>${l.title}</span>
                    </div>
                    <button onclick="deleteLink(${l.id})" style="color:red; border:none; background:none; cursor:pointer;">✕</button>
                </div>
            `).join('');
        }

        function renderProfile() {
            const user = storage[currentUser];
            document.getElementById('pub-pfp').src = user.pfp;
            document.getElementById('pub-name').innerText = user.name;
            const container = document.getElementById('pub-links');
            container.innerHTML = user.links.map(l => `
                <a href="${l.url}" target="_blank" class="link-pill">
                    <img src="${l.thumb}" class="link-thumb">
                    <span class="link-text">${l.title}</span>
                </a>
            `).join('');
        }
    </script>
</body>
</html>
